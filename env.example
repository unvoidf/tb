# TrendBot Configuration Example
# Copy this file to .env and fill in your values

# ===== TELEGRAM =====
# Required: Telegram Bot Token and Channel ID
TELEGRAM_BOT_TOKEN=your_bot_token_here
TELEGRAM_CHANNEL_ID=your_channel_id_here

# Optional: Admin User IDs (comma separated) for error notifications
ADMIN_USER_IDS=

# Optional: Whitelist User IDs (comma separated) - empty means all users allowed
WHITELIST_IDS=

# ===== BINANCE =====
# Binance mode: testnet or mainnet
BINANCE_MODE=testnet

# Binance API credentials (optional for Phase 0, required for Phase 3)
BINANCE_API_KEY=
BINANCE_API_SECRET=

# HTTP settings
BINANCE_RECV_WINDOW_MS=5000
HTTP_TIMEOUT_MS=10000

# ===== PHASE 0: LATENCY & CLOCK DRIFT =====
CLOCK_DRIFT_WARN_MS=1000
CLOCK_DRIFT_CRIT_MS=2000
LATENCY_WARN_MS=300
LATENCY_CRIT_MS=800

# ===== PHASE 1: POSITION & MARGIN =====
# Position mode: oneway or hedge
POSITION_MODE=oneway

# Margin mode: isolated or cross
MARGIN_MODE=isolated

# Global leverage (default: 5x)
LEVERAGE_GLOBAL=5

# Symbol-specific leverage overrides (format: BTCUSDT:10,ETHUSDT:8)
LEVERAGE_SYMBOL_OVERRIDES=

# === SIGNAL GENERATION PARAMETERS ===
# Direction-Specific Confidence Thresholds (0.0 - 1.0)
# Data-driven defaults based on historical performance analysis:
# - LONG signals: 6.67% win rate → requires 0.90 threshold
# - SHORT signals: 36.84% win rate → uses 0.69 threshold
CONFIDENCE_THRESHOLD_LONG=0.90
CONFIDENCE_THRESHOLD_SHORT=0.69

# Legacy threshold (DEPRECATED - kept for backwards compatibility)
# Minimum confidence threshold for signals (0.0-1.0, default: 0.69 = 69%)
CONFIDENCE_THRESHOLD=0.69

# Signal cooldown period in hours (default: 1)
COOLDOWN_HOURS=1

# Signal tracker update interval in minutes (default: 1)
SIGNAL_TRACKER_INTERVAL_MINUTES=1

# Ranging strategy minimum stop-loss percentage (default: 0.5%)
RANGING_MIN_SL_PERCENT=0.5

# === VOLATILITY FILTERS ===
# Minimum ATR as percentage of price (default: 2.0%)
# Signals with lower ATR are rejected to avoid low-volatility false positives
# Data analysis: 51.7% of signals with ATR <2% failed
MIN_ATR_PERCENT=2.0

# ===== TECHNICAL INDICATORS =====
# RSI Period
RSI_PERIOD=14

# MACD Parameters
MACD_FAST=12
MACD_SLOW=26
MACD_SIGNAL=9

# EMA Periods
EMA_SHORT=20
EMA_MEDIUM=50
EMA_LONG=200

# Bollinger Bands
BB_PERIOD=20
BB_STD=2

# ATR Period
ATR_PERIOD=14

# ADX Period
ADX_PERIOD=14

# Volume MA Period
VOLUME_MA_PERIOD=20

# ===== RISK MANAGEMENT =====
# Risk percentages
RISK_LOW=0.01
RISK_MEDIUM=0.03
RISK_HIGH=0.05

# Leverage limits
LEVERAGE_MIN=1
LEVERAGE_MAX=10

# Maintenance Margin Rate (default: 0.004 = 0.4%)
MAINTENANCE_MARGIN_RATE=0.004

# ===== OPTIMIZATION ENGINE =====
# Risk ranges for optimization (comma separated, default: 0.5,1.0,1.5,2.0,2.5,3.0,3.5,4.0,4.5,5.0)
OPTIMIZE_RISK_RANGES=0.5,1.0,1.5,2.0,2.5,3.0,3.5,4.0,4.5,5.0

# Leverage ranges for optimization (comma separated, default: 1,2,3,4,5,7,10,12,15,20,25,30,35,40,45,50)
OPTIMIZE_LEVERAGE_RANGES=1,2,3,4,5,7,10,12,15,20,25,30,35

# Minimum buffer between SL and liquidation price for simulation (percentage, default: 0.01 = 1%)
OPTIMIZE_MIN_SL_LIQ_BUFFER=0.01

# ===== LIQUIDATION SAFETY FILTER =====
# Risk ranges for safety filter (comma separated, default: 0.5,1.0,1.5,2.0,2.5,3.0,3.5,4.0,4.5,5.0)
SAFETYFILTER_RISK_RANGES=0.5,1.0,1.5,2.0,2.5,3.0,3.5,4.0,4.5,5.0

# Leverage ranges for safety filter (comma separated, default: 1,2,3,4,5,7,10,12,15,20)
SAFETYFILTER_LEVERAGE_RANGES=1,2,3,4,5,7,10,12,15,20,25,30,35

# Minimum buffer between SL and liquidation price (percentage, default: 0.01 = 1%)
SAFETYFILTER_MIN_SL_LIQ_BUFFER=0.01

# ===== FIBONACCI LEVELS =====
# Fibonacci retracement levels (comma separated)
FIB_LEVELS=0.236,0.382,0.618,0.786

# Fibonacci extension levels (comma separated)
FIB_EXTENSIONS=1.0,1.618,2.618

# Swing lookback period
SWING_LOOKBACK=100

# ===== TIMEFRAME CONFIGURATION =====
# Analysis timeframes (comma separated)
TIMEFRAMES=1h,4h,1d

# Timeframe weights (format: 1h:0.40,4h:0.35,1d:0.25)
TIMEFRAME_WEIGHTS=1h:0.40,4h:0.35,1d:0.25

# ===== COIN SELECTION =====
# Number of top coins to analyze
TOP_COINS_COUNT=20

# Number of top signals to report
TOP_SIGNALS_COUNT=5

# ===== VOLUME ANALYSIS =====
# Volume spike threshold multiplier
VOLUME_SPIKE_THRESHOLD=1.5

# ===== ADX THRESHOLDS =====
# ADX weak trend threshold
ADX_WEAK_THRESHOLD=20

# ADX strong trend threshold
ADX_STRONG_THRESHOLD=40

# ===== RETRY CONFIGURATION =====
# Maximum retry attempts for API calls
RETRY_MAX_ATTEMPTS=5

# Backoff base for exponential backoff
RETRY_BACKOFF_BASE=2

# Initial delay for retries (seconds)
RETRY_INITIAL_DELAY=1

# ===== LOGGING =====
# Log directory
LOG_DIR=logs

# Maximum log file size (bytes, default: 5242880 = 5MB)
# Reduced from 10MB to limit disk usage
LOG_MAX_BYTES=5242880

# Number of backup log files (default: 3)
# Reduced from 5 to save disk space
LOG_BACKUP_COUNT=3

# Async logging enabled (default: true)
# Async logging improves performance by writing logs in a separate thread
LOG_ASYNC_ENABLED=true

# Log rotation type: 'size', 'time', or 'both' (default: both)
# - 'size': Rotate when file reaches LOG_MAX_BYTES
# - 'time': Rotate based on time (see LOG_ROTATION_WHEN)
# - 'both': Use both size and time rotation
LOG_ROTATION_TYPE=both

# Time-based rotation when: 'midnight', 'H' (hourly), 'D' (daily), 'W' (weekly)
# Default: 'midnight' (rotate at midnight daily)
LOG_ROTATION_WHEN=midnight

# Time-based rotation interval (default: 1)
# For example: LOG_ROTATION_WHEN=H and LOG_ROTATION_INTERVAL=2 means rotate every 2 hours
LOG_ROTATION_INTERVAL=1

# Note: Logs are automatically categorized into separate files:
#   - trendbot.log: General system logs (all components)
#   - signal_scanner.log: Signal scanning and generation logs
#   - signal_tracker.log: TP/SL tracking logs
# All log files use the same rotation settings above.

# ===== TIMEZONE =====
# Timezone for timestamp formatting (default: Europe/Istanbul for Turkey time)
TZ=Europe/Istanbul

